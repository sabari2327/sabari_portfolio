<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sticky Notes with Groups</title>
  <style>
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 25px;
      font-size: 28px;
      color: #444;
    }
    #controls {
      display: flex;
      justify-content: center;
      margin-bottom: 25px;
      gap: 12px;
    }
    button {
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #4a90e2;
      color: #fff;
      font-size: 14px;
      font-weight: 500;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      transition: all 0.25s ease;
    }
    button:hover {
      background: #357ab7;
      transform: translateY(-2px);
    }
    .group {
      margin-bottom: 30px;
      padding: 20px;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      position: relative;
      transition: 0.3s;
    }
    .group h2 {
      margin: 0 0 15px 0;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 600;
    }
    .group h2 input {
      border: none;
      outline: none;
      padding: 6px 10px;
      font-size: 16px;
      border-radius: 6px;
      background: #f7f7f7;
      
    }
    .notes {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
    }
    .note {
      background: #fffbea;
      padding: 14px;
      width: 250px;
      min-height: 160px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.12);
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: 0.3s;
    }
    .note:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
    }
    .note-content {
      flex: 1;
      outline: none;
      margin-top: 8px;
      padding: 5px;
      font-size: 14px;
      line-height: 1.4em;
    }
    .note-content:empty:before {
      content: attr(data-placeholder);
      color: #aaa;
      font-style: italic;
    }
    .note-footer {
      font-size: 11px;
      text-align: right;
      margin-top: 8px;
      color: #777;
    }

    /* ✅ Premium Close Buttons */
    .note > .delete-btn,
    .group .delete-group {
      position: absolute;
      top: 8px;
      right: 8px;
      border: none;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      color: #fff;
      background: linear-gradient(135deg, #ff4e50, #f9d423);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .note > .delete-btn:hover,
    .group .delete-group:hover {
      background: linear-gradient(135deg, #f12711, #f5af19);
      transform: scale(1.1) rotate(90deg);
      box-shadow: 0 6px 12px rgba(0,0,0,0.25);
    }

    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
      align-items: center;
    }
    .toolbar button {
      padding: 4px 6px;
      font-size: 12px;
      background: #4a90e2;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: #fff;
      box-shadow: 0 1px 3px rgba(0,0,0,0.15);
      transition: 0.2s;
    }
    .toolbar button:hover {
      background: #357ab7;
    }
    .toolbar select, .toolbar input[type="color"] {
      padding: 4px;
      font-size: 12px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>NOTES</h1>
  <div id="controls">
    <button onclick="createGroup()">Add Group + </button>
  </div>
  <div id="groups"></div>

  <script>
    function saveNotes() {
      const groups = [];
      document.querySelectorAll(".group").forEach(group => {
        const groupName = group.querySelector("input").value;
        const notes = [];
        group.querySelectorAll(".note").forEach(note => {
          notes.push({
            content: note.querySelector(".note-content").innerHTML,
            time: note.querySelector(".note-footer").innerText
          });
        });
        groups.push({ groupName, notes });
      });
      localStorage.setItem("stickyNotes", JSON.stringify(groups));
    }

    function loadNotes() {
      const data = JSON.parse(localStorage.getItem("stickyNotes") || "[]");
      data.forEach(g => {
        const group = createGroup(g.groupName);
        g.notes.forEach(n => createNote(group, n.content, n.time));
      });
    }

    function createGroup(name = "") {
      const groupsContainer = document.getElementById("groups");

      const group = document.createElement("div");
      group.className = "group";

      const title = document.createElement("h2");
      const input = document.createElement("input");
      input.placeholder = "Enter group name...";
      input.value = name;
      input.oninput = saveNotes;
      title.appendChild(input);

      const addNoteBtn = document.createElement("button");
      addNoteBtn.innerText = "Add Note +";
      addNoteBtn.onclick = () => createNote(group);
      title.appendChild(addNoteBtn);

      group.appendChild(title);

      const notesContainer = document.createElement("div");
      notesContainer.className = "notes";
      group.appendChild(notesContainer);

      const delGroupBtn = document.createElement("button");
      delGroupBtn.className = "delete-group";
      delGroupBtn.innerText = "✖";
      delGroupBtn.onclick = () => {
        if (confirm("Are you sure want to delete this group?")) {
          group.remove();
          saveNotes();
        }
      };
      group.appendChild(delGroupBtn);

      groupsContainer.appendChild(group);
      saveNotes();
      return group;
    }

    function createNote(group, content = "", time = "") {
      const notesContainer = group.querySelector(".notes");

      const note = document.createElement("div");
      note.className = "note";

      const delBtn = document.createElement("button");
      delBtn.className = "delete-btn";
      delBtn.innerText = "✖";
      delBtn.onclick = () => {
        if (confirm("Are you sure want to delete this note?")) {
          note.remove();
          saveNotes();
        }
      };
      note.appendChild(delBtn);

      const toolbar = document.createElement("div");
      toolbar.className = "toolbar";

      toolbar.innerHTML = `
        <button onclick="formatText(this,'bold')"><b>B</b></button>
        <button onclick="formatText(this,'italic')"><i>I</i></button>
        <button onclick="formatText(this,'underline')"><u>U</u></button>
        <button onclick="formatText(this,'insertUnorderedList')">•</button>
        <button onclick="insertCheckbox(this)">☑</button>
        <select onchange="formatText(this,'fontSize', this.value)">
          <option value="3">Size</option>
          <option value="2">Small</option>
          <option value="3">Normal</option>
          <option value="4">Large</option>
          <option value="5">X-Large</option>
        </select>
        <input type="color" onchange="changeColor(this)">
      `;
      note.appendChild(toolbar);

      const contentDiv = document.createElement("div");
      contentDiv.className = "note-content";
      contentDiv.contentEditable = "true";
      contentDiv.setAttribute("data-placeholder", "Take a note...");
      contentDiv.innerHTML = content;
      contentDiv.oninput = () => {
        updateLastEdited(note);
        saveNotes();
      };
      note.appendChild(contentDiv);

      const footer = document.createElement("div");
      footer.className = "note-footer";
      footer.innerText = time || "Last edited: never";
      note.appendChild(footer);

      notesContainer.appendChild(note);
      saveNotes();
    }

    function updateLastEdited(note) {
      const footer = note.querySelector(".note-footer");
      footer.innerText = "Last edited: " + new Date().toLocaleString();
    }

    function formatText(el, command, value = null) {
      const note = el.closest(".note");
      const content = note.querySelector(".note-content");
      content.focus();
      document.execCommand(command, false, value);
      updateLastEdited(note);
      saveNotes();
    }

    function changeColor(el) {
      formatText(el, "foreColor", el.value);
    }

    function insertCheckbox(el) {
      const note = el.closest(".note");
      const content = note.querySelector(".note-content");

      const checkboxHTML = `
        <div>
          <input type="checkbox" onclick="this.nextElementSibling.style.textDecoration=this.checked?'line-through':'none'; saveNotes();" />
          <span contenteditable="true">Enter text</span>
        </div>
      `;

      content.focus();
      document.execCommand("insertHTML", false, checkboxHTML);
      updateLastEdited(note);
      saveNotes();
    }

    loadNotes();
  </script>
</body>
</html>
