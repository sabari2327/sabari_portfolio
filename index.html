<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sticky Notes Pro+</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f8f9fa;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      width: 100%;
      padding: 1rem;
      background: #ffcc00;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .top-bar {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin: 15px;
    }

    .top-bar input, .top-bar select, .top-bar button {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
    }

    .add-btn {
      background: #28a745;
      color: white;
      border: none;
      cursor: pointer;
    }

    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
      width: 95%;
      margin-bottom: 30px;
    }

    .note {
      background: #fff59d;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      min-height: 200px;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease;
    }

    .note:hover {
      transform: scale(1.02);
    }

    .toolbar {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-bottom: 8px;
      justify-content: space-between;
    }

    .toolbar button, .toolbar select, .toolbar input {
      padding: 4px 6px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background: #fff;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      font-size: 0.9rem;
    }

    .note-content {
      flex: 1;
      outline: none;
      font-size: 1rem;
      background: transparent;
      padding: 5px;
      border-radius: 6px;
    }

    .note-footer {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 0.85rem;
      color: #555;
    }

    .note-footer input {
      border: none;
      background: transparent;
      border-bottom: 1px dashed #333;
      padding: 2px 4px;
      font-size: 0.85rem;
      width: 100px;
    }

    .note-footer span {
      font-style: italic;
    }
  </style>
</head>
<body>
  <header>Sticky Notes Pro+</header>

  <!-- Top bar -->
  <div class="top-bar">
    <input type="text" id="search" placeholder="ðŸ” Search notes..." oninput="filterNotes()">
    <button class="add-btn" onclick="addNote()">âž• Add Note</button>
  </div>

  <!-- Notes container -->
  <div class="container" id="notes-container"></div>

  <script>
    const notesContainer = document.getElementById("notes-container");
    const searchInput = document.getElementById("search");

    // Load notes
    function loadNotes() {
      const savedNotes = JSON.parse(localStorage.getItem("notes") || "[]");
      savedNotes.forEach(noteData => createNote(noteData));
    }

    // Create note
    function createNote({content="Take a note...", color="#fff59d", group="General", date=new Date().toLocaleString()} = {}) {
      const note = document.createElement("div");
      note.className = "note";
      note.style.background = color;

      note.innerHTML = `
        <div class="toolbar">
          <div>
            <button onclick="formatText(this,'bold')"><b>B</b></button>
            <button onclick="formatText(this,'italic')"><i>I</i></button>
            <button onclick="formatText(this,'underline')"><u>U</u></button>
            <button onclick="formatText(this,'insertUnorderedList')">â€¢</button>
            <select onchange="formatText(this,'fontSize', this.value)">
              <option value="3">Size</option>
              <option value="2">Small</option>
              <option value="3">Normal</option>
              <option value="4">Large</option>
              <option value="5">X-Large</option>
            </select>
            <input type="color" value="${color}" onchange="changeColor(this)">
          </div>
          <button onclick="deleteNote(this)" style="background:red;color:white;">âœ–</button>
        </div>
        <div class="note-content" contenteditable="true">${content}</div>
        <div class="note-footer">
          <input type="text" value="${group}" onchange="saveNotes()" placeholder="Group">
          <span>Last edited: ${date}</span>
        </div>
      `;

      const contentDiv = note.querySelector(".note-content");
      contentDiv.addEventListener("input", () => {
        updateLastEdited(note);
        saveNotes();
      });

      note.querySelector("input").addEventListener("input", saveNotes);

      notesContainer.appendChild(note);
      saveNotes();
    }

    // Add note
    function addNote() {
      createNote({date:new Date().toLocaleString()});
    }

    // Delete note
    function deleteNote(btn) {
      btn.closest(".note").remove();
      saveNotes();
    }

    // Save all notes
    function saveNotes() {
      const notes = Array.from(document.querySelectorAll(".note")).map(note => ({
        content: note.querySelector(".note-content").innerHTML,
        color: note.style.background,
        group: note.querySelector(".note-footer input").value,
        date: note.querySelector(".note-footer span").innerText.replace("Last edited: ","")
      }));
      localStorage.setItem("notes", JSON.stringify(notes));
    }

    // Text formatting (per note)
    function formatText(el, cmd, value = null) {
      const note = el.closest(".note");
      const content = note.querySelector(".note-content");
      content.focus();
      document.execCommand(cmd, false, value);
      updateLastEdited(note);
      saveNotes();
    }

    // Change note color
    function changeColor(input) {
      const note = input.closest(".note");
      note.style.background = input.value;
      updateLastEdited(note);
      saveNotes();
    }

    // Update last edited time
    function updateLastEdited(note) {
      const time = new Date().toLocaleString();
      note.querySelector(".note-footer span").innerText = `Last edited: ${time}`;
    }

    // Filter notes
    function filterNotes() {
      const searchVal = searchInput.value.toLowerCase();
      Array.from(document.querySelectorAll(".note")).forEach(note => {
        const text = note.querySelector(".note-content").innerText.toLowerCase();
        const group = note.querySelector(".note-footer input").value.toLowerCase();
        const matches = text.includes(searchVal) || group.includes(searchVal);
        note.style.display = matches ? "flex" : "none";
      });
    }

    loadNotes();
  </script>
</body>
</html>
